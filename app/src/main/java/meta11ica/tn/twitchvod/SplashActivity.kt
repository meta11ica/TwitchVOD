package meta11ica.tn.twitchvod

import android.annotation.SuppressLint
import android.content.Intent
import android.net.Uri
import android.os.Bundle
import android.os.StrictMode
import android.util.Log
import android.view.LayoutInflater
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import androidx.lifecycle.lifecycleScope
import khttp.get
import khttp.post
import kotlinx.coroutines.launch
import meta11ica.tn.twitchvod.databinding.ActivitySplashBinding
import org.json.JSONArray
import org.json.JSONObject
import java.io.File
import java.net.URLEncoder
import java.util.Locale


class SplashActivity : AppCompatActivity() {
    private lateinit var binding: ActivitySplashBinding
    override fun onCreate(savedInstanceState: Bundle?) {

        super.onCreate(savedInstanceState)

        lifecycleScope.launch {

            val policy = StrictMode.ThreadPolicy.Builder().permitAll().build()

            StrictMode.setThreadPolicy(policy)
            checkForUpdates()
            initializePrefs()
        }
        binding = ActivitySplashBinding.inflate(LayoutInflater.from(this))
        setContentView(binding.root)
        binding.ivGood.alpha = 0f

        binding.ivGood.animate().alpha(1f).setDuration(1000).withEndAction {
            val i = Intent(this, MainActivity::class.java)
            startActivity(i)
            this.overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out)
            finish()
        }

    }


    private fun initializePrefs() {
        lateinit var streamerId: List<String>
        val sharedPrefs = getSharedPreferences("Streamers", MODE_PRIVATE)
        //sharedPrefs.edit().clear().commit()
        if (sharedPrefs.getString("favourite_streamers", null)==null) {
            streamerId = listOf(
                "Domingo"
            )

            sharedPrefs.edit().putString("favourite_streamers",streamerId.joinToString(separator=",")).commit()
        }
        else {
            streamerId = sharedPrefs.getString("favourite_streamers", "micode")?.split(",")!!
            // Return the array of values

        }
        val editor = sharedPrefs.edit()
        // the first use of the shared preference will trigger its initialisation
        editor?.putBoolean("initialized", true)
        val streamerArray = JSONArray()

        lifecycleScope.launch {

            val favStreamers = sharedPrefs.getString("favourite_streamers","[micode]")?.split(",")

            val answers = favStreamers?.let { makeTwitchPostRequest(it) }
            val strResponse = answers?.get(0)
            val strLiveResponse = answers?.get(1)

            (0 until JSONArray(strResponse).length()).forEach {
                val userJsonObject = JSONArray(strResponse).getJSONObject(it)
                val userLiveJsonObject = JSONArray(strLiveResponse).getJSONObject(it)

                val title: MutableList<String> = ArrayList()
                val duration: MutableList<Long> = ArrayList()
                val id: MutableList<Long> = ArrayList()
                val description: MutableList<String> = ArrayList()
                val studio: MutableList<String> = ArrayList()
                val bgImageUrl: MutableList<String> = ArrayList()
                val videoUrl: MutableList<String> = ArrayList()
                val cardImageUrl: MutableList<String> = ArrayList()
                try {
                    //val jsonedges = userJsonObject.getJSONObject("data").getJSONObject("user")
                    //    .getJSONObject("videos").getJSONArray("edges")
                    val jsonedges = userJsonObject.getJSONObject("data")
                        .getJSONObject("user")
                        .getJSONObject("videoShelves").getJSONArray("edges")

    if (!userLiveJsonObject.toString().contains("\"stream\":null")) {

        val liveUrl = getLiveURL(favStreamers?.get(it))
        id.add(userLiveJsonObject.getJSONObject("data").getJSONObject("user").getJSONObject("broadcastSettings").getLong("id"))
        title.add(userLiveJsonObject.getJSONObject("data").getJSONObject("user").getJSONObject("broadcastSettings").getString("title"))
        description.add(userLiveJsonObject.getJSONObject("data").getJSONObject("user").getJSONObject("broadcastSettings").getString("title"))
        duration.add(0)
        studio.add(("Twitch"))
        videoUrl.add(liveUrl)
        bgImageUrl.add(
            "data:image/png;base64,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"
        )
        cardImageUrl.add(
            "data:image/png;base64,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"
        )
    }

    for (i in 0 until jsonedges.length()) {
        val videoNode = jsonedges.getJSONObject(i).getJSONObject("node")
        if(videoNode.getString("type").equals("LATEST_BROADCASTS")) {
            for (j in 0 until videoNode.getJSONArray("items").length()) {
                val item = videoNode.getJSONArray("items").getJSONObject(j)
                Log.d("111111111", item.toString())


                title.add(item.getString("title"))

                val desc = if (!item.isNull("game")) {
                    item.getJSONObject("game").getString("name")
                } else {
                    "Untitled"
                }
                description.add(desc)
                studio.add(("Twitch"))
                id.add(item.getLong("id"))
                videoUrl.add(
                    "https://www.twitch.tv/videos/" + item.getString("id")
                )
                duration.add(item.getLong("lengthSeconds"))
                if (item.getString("previewThumbnailURL")
                        .contains("_404/404")
                ) {
                    bgImageUrl.add(
                        "data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Qm+aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+IDxkYzpjcmVhdG9yPiA8cmRmOlNlcT4gPHJkZjpsaT5WZWN0b3JTdG9jay5jb20vNDg1NTc5NjM8L3JkZjpsaT4gPC9yZGY6U2VxPiA8L2RjOmNyZWF0b3I+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAD6APoDAREAAhEBAxEB/8QAHQABAQADAAMBAQAAAAAAAAAAAAgBBgcE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"
                    )
                    cardImageUrl.add(
                        "data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Qm+aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+IDxkYzpjcmVhdG9yPiA8cmRmOlNlcT4gPHJkZjpsaT5WZWN0b3JTdG9jay5jb20vNDg1NTc5NjM8L3JkZjpsaT4gPC9yZGY6U2VxPiA8L2RjOmNyZWF0b3I+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAD6APoDAREAAhEBAxEB/8QAHQABAQADAAMBAQAAAAAAAAAAAAgBBgcE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"
                    )

                } else {
                    bgImageUrl.add(
                        item.getString("previewThumbnailURL")
                            .replace("320x180", "1920x1080")
                    )

                    cardImageUrl.add(
                        item.getString("previewThumbnailURL")
                    )
                }

            }
        }

    }
}
catch(e: Exception) {(Log.e("error","user problem"))}


                    val streamsArray = JSONArray()

                    for (i in studio.indices) {
                        val streamObject = JSONObject()
                        streamObject.put("id", id[i])
                        streamObject.put("title", title[i])
                        streamObject.put("description", description[i])
                        streamObject.put("studio", studio[i])
                        streamObject.put("duration", duration[i])
                        streamObject.put("videoUrl", videoUrl[i])
                        streamObject.put("bgImageUrl", bgImageUrl[i])
                        streamObject.put("cardImageUrl", cardImageUrl[i])
                        streamsArray.put(streamObject)
                    }
                    val streamerObject = JSONObject()
                    streamerObject.put("streamer_id", favStreamers?.get(it))
                    streamerObject.put("streams", streamsArray)
                    streamerArray.put(streamerObject)

                }
                editor?.putString("movies",streamerArray.toString())
                editor.apply()

            }




    }

    fun makeTwitchPostRequest(favStreamers: List<String>): Array<String> {
        val vodResponse = fetchGQL(buildVODStreamsObjectRequest(favStreamers))
        val liveResponse = fetchGQL(buildLiveStreamsObjectRequest(favStreamers))
        return arrayOf(vodResponse,liveResponse)
    }


    fun getLiveURL(streamer: String?): String {
        val query = """
        query PlaybackAccessToken_Template(${"$"}login: String!, ${"$"}isLive: Boolean!, ${"$"}vodID: ID!, ${"$"}isVod: Boolean!, ${"$"}playerType: String!) {  streamPlaybackAccessToken(channelName: ${"$"}login, params: {platform: "web", playerBackend: "mediaplayer", playerType: ${"$"}playerType}) @include(if: ${"$"}isLive) {    value    signature    __typename  } videoPlaybackAccessToken(id: ${"$"}vodID, params: {platform: "web", playerBackend: "mediaplayer", playerType: ${"$"}playerType}) @include(if: ${"$"}isVod) {    value    signature    __typename  }}
    """.trimIndent()
        val variablesObject = JSONObject()
        variablesObject.put("isLive", true)
        variablesObject.put("isVod", false)
        variablesObject.put("login", streamer)
        variablesObject.put("playerType", "site")
        variablesObject.put("vodID", "")

        val queryObject = JSONObject()
        val queryArray = JSONArray()
        queryObject.put("operationName", "PlaybackAccessToken_Template")
        queryObject.put("query",query)
        queryObject.put("variables",variablesObject)
        queryArray.put(queryObject)
        val rawtoken = JSONArray(fetchGQL(queryArray)).getJSONObject(0)
        val token = URLEncoder.encode(rawtoken.getJSONObject("data").getJSONObject("streamPlaybackAccessToken").getString("value"), "UTF-8")
        val signature = rawtoken.getJSONObject("data").getJSONObject("streamPlaybackAccessToken").getString("signature")

        val url = "api/channel/hls/$streamer".lowercase(Locale.ROOT) //fix bug streamer name must be in lowercase
        val liveStreamUrl = "https://usher.ttvnw.net/$url.m3u8?allow_source=true&allow_audio_only=true&fast_bread=true&playlist_include_framerate=true&reassignments_supported=true&sig=$signature&token=$token"
        return liveStreamUrl
    }

    fun buildVODStreamsObjectRequest(favStreamers: List<String>):JSONArray {
        val queriesArray = JSONArray()

        /*
        for (channelOwnerLogin in favStreamers) {
            val variablesObject = JSONObject()
            variablesObject.put("limit", 30)
            variablesObject.put("channelOwnerLogin", channelOwnerLogin)
            variablesObject.put("broadcastType", null)
            variablesObject.put("videoSort", "TIME")

            val extensionsObject = JSONObject()
            val persistedQueryObject = JSONObject()
            persistedQueryObject.put("version", 1)
            persistedQueryObject.put(
                "sha256Hash",
                "072ae0f19038145cdf1bbe51c83be73fa15ab553483509a8bb65589f6b9ca279"
            )
            extensionsObject.put("persistedQuery", persistedQueryObject)

            val queryObject = JSONObject()
            queryObject.put("operationName", "FilterableVideoTower_Videos")
            queryObject.put("variables", variablesObject)
            queryObject.put("extensions", extensionsObject)

            queriesArray.put(queryObject)
        }
        */
        for (channelOwnerLogin in favStreamers) {
            val variablesObject = JSONObject()
            variablesObject.put("videoSort", "TIME")
            variablesObject.put("channelLogin", channelOwnerLogin)
            variablesObject.put("first", 30)
            variablesObject.put("broadcastType", null)

            val extensionsObject = JSONObject()
            val persistedQueryObject = JSONObject()
            persistedQueryObject.put("version", 1)
            persistedQueryObject.put(
                "sha256Hash",
                "f374a282ca470e4cddb42f75c2b04fc277ce220cc1fe257062bc47d6eef48eb9"
            )
            extensionsObject.put("persistedQuery", persistedQueryObject)

            val queryObject = JSONObject()
            queryObject.put("operationName", "ChannelVideoShelvesQuery")
            queryObject.put("variables", variablesObject)
            queryObject.put("extensions", extensionsObject)

            queriesArray.put(queryObject)
        }
        return queriesArray
    }

    fun buildLiveStreamsObjectRequest(favStreamers: List<String>):JSONArray {
        val queriesArray2 = JSONArray()

        for (channelOwnerLogin in favStreamers) {
            val variablesObject2 = JSONObject().apply {
                put("isCollectionContent", false)
                put("isLiveContent", true)
                put("isVODContent", false)
                put("collectionID", "")
                put("login", channelOwnerLogin)
                put("vodID", "")
            }

            // Build extensions object
            val extensionsObject2 = JSONObject().apply {
                put("persistedQuery", JSONObject().apply {
                    put("version", 1)
                    put("sha256Hash", "2dbf505ee929438369e68e72319d1106bb3c142e295332fac157c90638968586")
                })
            }

            // Build the final JSON object
            val jsonObject = JSONObject().apply {
                put("operationName", "NielsenContentMetadata")
                put("variables", variablesObject2)
                put("extensions", extensionsObject2)
            }
            queriesArray2.put(jsonObject)
        }
        return queriesArray2
    }

    fun fetchGQL(body: JSONArray): String {

        val url = "https://gql.twitch.tv/gql"

        val headers = mapOf(
            "Client-ID" to "kimne78kx3ncx6brgo4mv6wki5h1ko", // Replace with your Twitch Client ID
            "Content-Type" to "application/json",
            "Accept" to "application/json",
            "User-Agent" to "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
        )
        return(post(url=url,headers=headers,data=body.toString()).text)


    }
    fun checkForUpdates() {
        try {
            val latestRelease = JSONObject(get(url = getString(R.string.update_check_json)).text).getJSONArray("elements").getJSONObject(0).getInt("versionCode")
            Toast.makeText(
                this,
                "Current version : "+resources.getInteger(R.integer.app_version_code)+", latest release version : "+latestRelease,
                Toast.LENGTH_SHORT
            ).show()

            val aua = AutoUpdateApk(applicationContext, getString(R.string.update_check_json))
            aua.setUpdateInterval(AutoUpdateApk.DAYS * 1);

        }
        catch (e: Exception)
        {
            e.printStackTrace()
            Log.e("Update checks","Couldn't check updates...")
        }
    }
}